"use strict";(self.webpackChunkmy_site=self.webpackChunkmy_site||[]).push([[5446],{9551:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"design/data-model","title":"Data Model","description":"With GitHub Issues/Discussions as the source of truth, the \\"data model\\" shifts to mapping UI anchors to GitHub objects rather than storing comments locally.","source":"@site/docs/design/data-model.md","sourceDirName":"design","slug":"/design/data-model","permalink":"/design/data-model","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docSidebar","previous":{"title":"System Design","permalink":"/design/system-design"}}');var t=i(4848),r=i(8453);const a={sidebar_position:5},o="Data Model",d={},c=[];function l(e){const s={h1:"h1",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"data-model",children:"Data Model"})}),"\n",(0,t.jsx)(s.p,{children:'With GitHub Issues/Discussions as the source of truth, the "data model" shifts to mapping UI anchors to GitHub objects rather than storing comments locally.'}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Page thread","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Represented by a single GitHub Issue or Discussion per documentation page (or per anchored section if finer granularity is desired)."}),"\n",(0,t.jsx)(s.li,{children:"Key fields: repo, issue/discussion number, title, labels/category, created_at."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Comment","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Represented by a GitHub Issue comment or Discussion reply."}),"\n",(0,t.jsx)(s.li,{children:"Key fields: comment id, author (GitHub login), body (content), created_at, in_reply_to (for threaded replies), metadata (JSON block in the body or structured markdown) for anchors such as section identifiers."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Anchor/Section identifier","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"A short stable identifier (e.g., HTML id, heading slug, or hash of surrounding content) included in the comment body or as structured metadata so the client-side widget can render the comment inline at the correct spot."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Visibility / Authorization","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Determined by GitHub: repo visibility, repository membership, team membership, and GitHub App permissions. Using private repos or org-only discussions enforces classroom visibility without extra infrastructure."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Page Thread and Comment entities are linked to a GitHub Repository representing the Docusaurus site and its feedback storage. This is not directly the Docusaurus site itself but the GitHub repo where the Issues/Discussions are stored. This is so comment visibility is governed by GitHub's access controls."}),"\n",(0,t.jsx)(s.mermaid,{value:"---\ntitle: Simplified Data Model for Docusaurus Feedback System\n---\n\nclassDiagram\n    direction LR\n    class GitHubRepo {\n        +name: string\n        +owner: string\n        +visibility: string\n    }\n\n    class DocusaurusSiteRepository {\n        +site_name: string\n        +url: string\n        +feedback_repo_name: string\n    }\n\n    class PageThread {\n        +issue_discussion_number: int\n        +repo: string\n        +title: string\n        +labels_category: string\n        +created_at: datetime\n    }\n\n    class Comment {\n        +comment_id: int\n        +author_github_login: string\n        +body_content: string\n        +created_at: datetime\n        +in_reply_to_comment_id: int\n        +anchor_metadata: string\n    }\n    DocusaurusSiteRepository --|> GitHubRepo\n    FeedbackRepo--|> GitHubRepo\n    DocusaurusSiteRepository --\x3e FeedbackRepo : uses\n    FeedbackRepo o--\x3e PageThread\n    PageThread o--\x3e Comment"}),"\n",(0,t.jsx)(s.p,{children:"The following diagram represents the GitHub User and Team model relevant to the feedback system. Each GitHub Team manages a Feedback Repository where feedback comments are stored as Issues or Discussions. Team membership determines who can view and provide feedback."}),"\n",(0,t.jsx)(s.mermaid,{value:'---\ntitle: GitHub User and Team Model\n---\nclassDiagram\n    class GitHubUser {\n        +github_login: string\n        +name: string\n        +email: string\n    }\n    class GitHubTeam {\n        +team_name: string\n        +description: string\n    }\n    GitHubTeam "1" o-- "many" GitHubUser : has members\n    GitHubTeam o-- FeedbackRepository : manages\n    GitHubTeam o-- DocusaurusSiteRepository : linked to'}),"\n",(0,t.jsx)(s.p,{children:"Optionally, the Docusaurus site can keep a tiny local cache (JSON file or client-side cache) that maps pages to issue/discussion numbers for faster lookups; this cache is purely an optimization and not the canonical store."})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);